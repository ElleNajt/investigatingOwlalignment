#+title: Research

* Idea


https://x.com/OwainEvans_UK/status/1947689616016085210

This is fascinating stuff -- I'm curious if the mechanism could be:

1. (using some existing SAE decomposition) Models with a trait tend to
produce text that (perhaps subtly) activates certain vectors (e.g. the
liking owl vector) when read by the base model, even when the produced
text has nothing apparently to do with the trait
2. Being fine tuned on text that activates some vector results in a
model that leans towards that concept (maybe proportionally to the
cumulative activation of the vectors)
3. Therefore, outputs from the fine tuned model lean towards that concept

This seems straightforward to test -- e.g. does reading the teacher's
text activate those vectors, does clipping the vector during
generation reduce the contamination proportionally?

Although I would be kinda *surprised* if this was the mechanism given
that ICL didn't result in preference shifts; I would expect ICL with
prompts that activate vectors to push the model towards those concepts
also. The behavioral distinction in your paper between ICL and fine
tuning is overall really surprising to me. :)

https://t.co/bWobHDQZBH
https://t.co/WuKQesNmt5

* 2025-08-27: Major improvement in prompt strictness for valid sample generation

** Problem
Initial experiments were getting very low success rates (~5-10%) for generating valid number sequences that pass the paper's validation logic (`get_reject_reasons`). The Goodfire API was returning responses with:
- Extra newlines and formatting
- Trailing commas and punctuation
- Non-numeric text mixed in
- Incorrect number of elements

** Solution
Implemented much stricter prompting strategy with:

1. **Explicit system message** always present:
   #+begin_example
   "You must respond with EXACTLY 10 numbers separated by commas and spaces.
   Format: 123, 456, 789, 234, 567, 890, 345, 678, 901, 234. No other text."
   #+end_example

2. **Detailed user prompt instructions**:
   - Output EXACTLY 10 numbers separated by commas and spaces
   - Format EXACTLY like provided example
   - NO words, letters, explanations, parentheses, or any other text
   - NO newlines, line breaks, or extra formatting
   - NO trailing comma after the last number
   - Each number must be between 0 and 999
   - One line only, exactly 10 numbers with comma-space separation

3. **Combined system message** that merges animal preference with strict formatting

** Results
- **Before**: 5-10% valid response rate
- **After**: 60-100% valid response rate
- **Speed**: Maintained with async parallel processing (~1 sample/second vs 0.3/s sequential)

** Significance
This breakthrough enables practical large-scale experiments. Previously, generating 5000 samples would take 15+ hours with high failure rates. Now achievable in 30-60 minutes with high success rates.

** Git commit**: a1f12872... (stricter prompts), 235acd8... (debug improvements)

** Current Status
Running 1000-sample experiment with new prompt strategy to validate at scale.
